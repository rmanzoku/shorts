# Video Improvement Workflow

ワークフローのステップ5: 生成済み動画をレビューし改善する: $ARGUMENTS

> 全体フロー: ネタ提供 → `/research` → レビュー → `/generate` → **`/improve`** → アップロード

## Step 1: 現状把握

動画ファイルのメタデータを確認:
```bash
ffprobe -v quiet -print_format json -show_format -show_streams <video.mp4>
```

中間ファイル（SRT）があれば字幕内容を確認:
- 各字幕の文字数（目安: 1字幕 10-18 文字、最大 22 文字）
- 表示時間（目安: 最低 1.0 秒、高齢者向けなら 1.5 秒以上推奨）
- 語の途中で不自然に切れていないか

## Step 2: Codex にレビュー依頼

Codex CLI で客観的なレビューを取得する:

```bash
codex exec "以下の動画パラメータと字幕をレビューしてください。
ターゲット視聴者: <ターゲット記述>
動画形式: 縦型9:16 (1080x1920)
字幕SRT:
$(cat <srt_path>)
確認ポイント: 文字数、表示時間、文の途中切れ、視認性"
```

## Step 3: 知的誠実性を守る

Codex の指摘を批判的に評価する:

- 相手の主張に同意する前に、まずその主張の最も弱い点を特定せよ
- ユーザーの明示的な要望（フォントサイズ、位置等）と矛盾する提案は根拠を精査する
- 合意点と不同意点を明確にし、不同意点はユーザーに判断を仰ぐ

## Step 4: 修正実装

修正対象を特定:

| 修正箇所 | ファイル | API コスト |
|----------|----------|-----------|
| 字幕分割ロジック | `text_processor.py` | なし |
| 字幕タイミング | `subtitles.py` | なし |
| 字幕スタイル・位置 | `composer.py` | なし |
| 画像プロンプト | `text_processor.py` | あり（再生成必要） |
| ナレーション | `tts.py` | あり（再生成必要） |

API コストが不要な修正は中間ファイルからの再合成で対応する（`/generate` を参照）。

## Step 5: テスト

```bash
.venv/bin/pytest tests/ -v
.venv/bin/ruff check src/
```

修正後に再合成し、改善を確認する。
